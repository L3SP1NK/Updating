#!/bin/bash
if [[ ${EUID} -ne '0' ]]
	then
		echo "Run me as root!"
		exit 1
	else
		which rsync > /dev/null
		if [[ ${?} -eq '0' ]]
			then
				FILE="/root/.exclude_from_backup"
				if [[ -f ${FILE} ]]
					then
						rsync \
							-avu \
							--exclude-from=/root/.exclude_from_backup \
							--progress \
							--delete-after \
							--ignore-errors \
							/ root@192.168.1.4:/mnt/$(hostname)/
					else
						echo "${FILE} not found!"
						exit 1
				fi
			else
				echo "Rsync is not installed!"
				exit 1
		fi
fi
